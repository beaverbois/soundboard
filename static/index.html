<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Soundboard</title>
    <script src="/static/htmx.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'dark-bg': '#222',
              'dark-text': '#eee',
              'dark-muted': '#888'
            }
          }
        }
      }
    </script>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body class="min-h-screen bg-dark-bg text-dark-text font-sans">
    <div class="min-h-screen flex items-center justify-center p-5 relative">
      <main class="flex flex-col items-center gap-3 w-full max-w-4xl">
        <!-- Sound buttons will be loaded here -->
        <div
          class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-8 w-full mx-auto px-5 justify-items-center"
          id="board"
          role="group"
          aria-label="Sound buttons"
          hx-get="/api/sounds"
          hx-trigger="load"
          hx-swap="innerHTML"
        ></div>

        <!-- Status area for HTMX responses -->
        <div
          id="status"
          class="w-full text-center min-h-[1.2em] text-dark-muted text-sm"
        ></div>
      </main>
    </div>

    <script>
      // Add press animation for buttons
      document.addEventListener("htmx:afterSettle", function (evt) {
        // Re-bind animations to new buttons
        document.querySelectorAll(".btn").forEach(bindPressAnimation);
      });

      function bindPressAnimation(btn) {
        const down = (e) => {
          if (e.cancelable) e.preventDefault();
          btn.classList.add("pressed");
        };
        const up = () => btn.classList.remove("pressed");
        btn.addEventListener("pointerdown", down, { passive: false });
        btn.addEventListener("pointerup", up);
        btn.addEventListener("pointerleave", up);
        btn.addEventListener("pointercancel", up);
      }

      // Initialize animations for existing buttons
      document.addEventListener("DOMContentLoaded", function () {
        document.querySelectorAll(".btn").forEach(bindPressAnimation);
      });
    </script>
  </body>
</html>
